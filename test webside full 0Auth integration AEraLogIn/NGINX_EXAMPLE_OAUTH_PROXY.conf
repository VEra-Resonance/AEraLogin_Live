# Beispiel: Nginx-Konfiguration für parallelen AEraLogin-Testserver
#
# Ziel: /example-oauth auf lokalen Flask-Testserver (Port 8000) weiterleiten,
# ohne den Hauptserver auf aeralogin.com zu stören.
#
# Diese Konfiguration ergänzt deine bestehende aeralogin.com-Server-Config.

server {
    listen 443 ssl;
    server_name aeralogin.com;
    # ... SSL-Zertifikate und andere Einstellungen ...

    # Hauptserver-Logik ...
    # location / { ... }

    # --- Testserver-Proxy für /example-oauth ---
    location /example-oauth/ {
        proxy_pass http://127.0.0.1:8000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
        # Optional: WebSocket Support
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # Optional: Statische Dateien für Testserver
    # location /example-oauth/static/ {
    #     alias /var/local/test webside full 0Auth integration AEraLogIn/static/;
    # }

    # ... weitere Einstellungen ...
}

# Hinweise:
# - Flask-Server muss auf 127.0.0.1:8000 laufen (nicht öffentlich!)
# - Rufe Testserver auf mit: https://aeralogin.com/example-oauth/
# - Passe ggf. static_url_path in Flask an, falls statische Dateien nicht gefunden werden.
# - Nach Änderung: nginx reload (sudo systemctl reload nginx)
